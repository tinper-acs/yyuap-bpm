/*! build:uba by yueming@yonyou.com hash:bfd0cfe1291990b2d590, chunkhash:db2c3099b381083d5c5f, name:main, filebase:main.bfd0cfe1.bundle.js, query:, file:js/main.bfd0cfe1.bundle.js */
(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{176:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=h(n(19)),r=h(n(24)),s=h(n(25)),o=h(n(55)),i=h(n(90)),c=h(n(28)),l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),(0,a.default)(e,r.key,r)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),u=h(n(0)),d=n(1),p=h(d),f=n(34),m=h(n(114)),y=h(n(91));function h(e){return e&&e.__esModule?e:{default:e}}var g={className:u.default.string,filterRefUrl:u.default.string,organrefCode:u.default.string,positonrefCode:u.default.string,roleRef:u.default.string,userRef:u.default.string,onCopyusersChange:u.default.func,onintersectionChange:u.default.func},v=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||(0,c.default)(t)).call(this));return e.changeCheck=function(){var t=e.props.onintersectionChange;e.setState({intersection:!e.state.intersection},function(){t&&t(e.state.intersection)})},e.state={copyusers:[],copyuserShowVal:[],copycheckedArray:[],intersection:!0},e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=(0,s.default)(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(r.default?(0,r.default)(e,t):e.__proto__=t)}(t,d.Component),l(t,[{key:"render",value:function(){var e=this,t={height:"30px",lineHeight:"30px",width:"10%",padding:"15px",display:"inline"},n={display:"inline-block",width:"36%"},a={title:"抄送部门选择",backdrop:!1,hasPage:!0,multiple:!0,refType:1,isRadio:!1,className:"",emptyBtn:!0,param:{refCode:e.props.organrefCode,tenantId:"",sysId:"",transmitParam:"EXAMPLE_CONTACTS,EXAMPLE_ORGANIZATION"},checkedArray:e.state.copycheckedArray[0]||[],onCancel:function(e){console.log(e)},onSave:function(t,n){var a=t.map(function(e){return e.id}),r=e.state.copyuserShowVal.slice();r[0]=n;var s=e.state.copyusers.slice();s[0]=(0,i.default)(a,function(e){return{id:e,type:"DEPTS"}});var o=e.state.copycheckedArray;o[0]=t;var c=e.props.onCopyusersChange;c&&c(s),e.setState({copyusers:s,copyuserShowVal:r,copycheckedArray:o})},showVal:e.state.copyuserShowVal[0],showKey:"refname",verification:!1},r={title:"抄送岗位选择",backdrop:!1,hasPage:!0,multiple:!0,refType:2,isRadio:!1,emptyBtn:!0,className:"",param:{refCode:e.props.positonrefCode,tenantId:"",sysId:"",transmitParam:"EXAMPLE_CONTACTS,EXAMPLE_ORGANIZATION"},checkedArray:e.state.copycheckedArray[1]||[],onCancel:function(e){console.log(e)},onSave:function(t,n){var a=t.map(function(e){return e.id}),r=e.state.copyuserShowVal.slice();r[1]=n;var s=e.state.copyusers.slice();s[1]=(0,i.default)(a,function(e){return{id:e,type:"POSTS"}});var o=e.state.copycheckedArray;o[1]=t;var c=e.props.onCopyusersChange;c&&c(s),e.setState({copyusers:s,copyuserShowVal:r,copycheckedArray:o})},showVal:e.state.copyuserShowVal[1],showKey:"refname",verification:!1},s={title:"抄送角色选择",backdrop:!1,hasPage:!0,refType:2,isRadio:!1,emptyBtn:!0,className:"",param:{refCode:e.props.roleRef,tenantId:"",sysId:"",transmitParam:"EXAMPLE_CONTACTS,EXAMPLE_ORGANIZATION"},checkedArray:e.state.copycheckedArray[2]||[],onCancel:function(e){console.log(e)},onSave:function(t,n){var a=t.map(function(e){return e.id}),r=e.state.copyuserShowVal.slice();r[2]=n;var s=e.state.copyusers.slice();s[2]=(0,i.default)(a,function(e){return{id:e,type:"USERGROUP"}});var o=e.state.copycheckedArray;o[2]=t;var c=e.props.onCopyusersChange;c&&c(s),e.setState({copyusers:s,copyuserShowVal:r,copycheckedArray:o})},showVal:e.state.copyuserShowVal[2],showKey:"refname",verification:!1},c={title:"抄送人员选择",backdrop:!1,hasPage:!0,emptyBtn:!0,refType:2,isRadio:!1,className:"",param:{refCode:e.props.refCode,tenantId:"",sysId:"",transmitParam:"EXAMPLE_CONTACTS,EXAMPLE_ORGANIZATION"},checkedArray:e.state.copycheckedArray[3]||[],onCancel:function(e){console.log(e)},onSave:function(t,n){var a=t.map(function(e){return e.id}),r=e.state.copyuserShowVal.slice();r[3]=n;var s=e.state.copyusers.slice();s[3]=(0,i.default)(a,function(e){return{id:e,type:"USER"}});var o=e.state.copycheckedArray;o[3]=t;var c=e.props.onCopyusersChange;c&&c(s),e.setState({copyusers:s,copyuserShowVal:r,copycheckedArray:o})},showVal:e.state.copyuserShowVal[3],showKey:"refname",verification:!1};return p.default.createElement("div",null,p.default.createElement(f.Row,null,p.default.createElement(f.Label,{style:t,className:"refLabel"},"按部门:"),p.default.createElement("div",{style:n},p.default.createElement(m.default,{disabled:!1,option:(0,o.default)(JSON.parse(y.default),a)})),p.default.createElement(f.Label,{style:t,className:"refLabel"},"按岗位:"),p.default.createElement("div",{style:n},p.default.createElement(m.default,{disabled:!1,option:(0,o.default)(JSON.parse(y.default),r)}))),p.default.createElement(f.Row,{style:{marginTop:"15px",marginBottom:"15px"}},p.default.createElement(f.Label,{style:t,className:"refLabel"},"按角色:"),p.default.createElement("div",{style:n},p.default.createElement(m.default,{disabled:!1,option:(0,o.default)(JSON.parse(y.default),s)})),p.default.createElement(f.Label,{style:t,className:"refLabel"},"按用户:"),p.default.createElement("div",{style:n},p.default.createElement(m.default,{disabled:!1,option:(0,o.default)(JSON.parse(y.default),c)}))),p.default.createElement(f.Checkbox,{style:{margin:0},checked:this.state.intersection,onChange:this.changeCheck},"是否交集"))}}]),t}();v.propTypes=g,v.defaultProps={className:"",filterRefUrl:"/iuap_pap_quickstart/common/filterRef",organrefCode:"newdept",positonrefCode:"newposition",roleRef:"newRoleRef",userRef:"relatedUser"},t.default=v},188:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=y(n(37)),r=y(n(19)),s=y(n(24)),o=y(n(25)),i=y(n(48)),c=y(n(28)),l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),(0,r.default)(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),u=y(n(0)),d=n(1),p=y(d),f=n(34),m=n(54);function y(e){return e&&e.__esModule?e:{default:e}}var h={processDefinitionId:u.default.string,processInstanceId:u.default.string},g=function(e){function t(){var e=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||(0,c.default)(t)).call(this));return n.componentDidMount=function(e){return function(){var t=e.apply(this,arguments);return new a.default(function(e,n){return function r(s,o){try{var i=t[s](o),c=i.value}catch(e){return void n(e)}if(!i.done)return a.default.resolve(c).then(function(e){r("next",e)},function(e){r("throw",e)});e(c)}("next")})}}(i.default.mark(function t(){var a,r,s,o;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.props,r=a.processDefinitionId,s=a.processInstanceId,e.next=3,(0,m.sendBpmTaskAJAX)("hisTasklist",{processDefinitionId:r,processInstanceId:s});case 3:o=e.sent,n.setState({data:o.data.data});case 5:case"end":return e.stop()}},t,e)})),n.state={data:[]},n.columns=[{title:"环节名称",dataIndex:"name",key:"name"},{title:"任务类型",dataIndex:"description",key:"description",render:function(e,t,n){return p.default.createElement("div",null,(0,m.descriptionToText)(e))}},{title:"审批人",dataIndex:"executionId",key:"executionId"},{title:"开始时间",dataIndex:"startTime",key:"startTime",render:function(e,t,n){return p.default.createElement("div",null,(0,m.timestampToDate)(e))}},{title:"结束时间",dataIndex:"endTime",key:"endTime",render:function(e,t,n){return null==e?p.default.createElement("div",null,"-"):p.default.createElement("div",null,(0,m.timestampToDate)(e))}},{title:"任务状态",dataIndex:"e",key:"e",render:function(e,t,n){return null==t?p.default.createElement("div",null,"-"):p.default.createElement("div",null,(0,m.recordToState)(t))}},{title:"审批意见",dataIndex:"deleteReason",key:"deleteReason"},{title:"超时时间",dataIndex:"claimTime",key:"claimTime",render:function(e,t,n){return null==e?p.default.createElement("div",null,"-"):p.default.createElement("div",null,(0,m.timestampToDate)(e))}}],n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=(0,o.default)(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(s.default?(0,s.default)(e,t):e.__proto__=t)}(t,d.Component),l(t,[{key:"render",value:function(){return p.default.createElement(f.Table,{bordered:!0,emptyText:function(){return p.default.createElement("span",null,"暂时没有流程历史数据")},columns:this.columns,data:this.state.data})}}]),t}();g.propTypes=h,g.defaultProps={processDefinitionId:"eiap508870:4:c3bc57e8-631a-11e8-8d04-0686c4000fcf",processInstanceId:"d5c3ab59-631a-11e8-8d04-0686c4000fcf"},t.default=g},204:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=d(n(19)),r=d(n(24)),s=d(n(25)),o=d(n(28)),i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),(0,a.default)(e,r.key,r)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),c=n(1),l=d(c),u=d(n(0));function d(e){return e&&e.__esModule?e:{default:e}}var p={url:u.default.string,processDefinitionId:u.default.string,processInstanceId:u.default.string,width:u.default.string,height:u.default.string},f=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||(0,o.default)(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=(0,s.default)(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(r.default?(0,r.default)(e,t):e.__proto__=t)}(t,c.Component),i(t,[{key:"render",value:function(){var e=this.props,t=e.processDefinitionId,n=e.processInstanceId,a=e.width,r=e.height,s=e.url;return l.default.createElement("div",null,l.default.createElement("iframe",{style:{width:a,height:r,minHeight:"300px"},src:s+"?processDefinitionId="+t+"&processInstanceId="+n,frameBorder:"0"}))}}]),t}();f.propTypes=p,f.defaultProps={url:"/eiap-plus/vendor/diagram-viewer/index.html",width:"99%",height:"300px",processDefinitionId:"eiap508870:4:c3bc57e8-631a-11e8-8d04-0686c4000fcf",processInstanceId:"d5c3ab59-631a-11e8-8d04-0686c4000fcf"},t.default=f},205:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=b(n(37)),r=b(n(19)),s=b(n(24)),o=b(n(25)),i=b(n(55)),c=b(n(48)),l=b(n(28)),u=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),(0,r.default)(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),d=b(n(0)),p=n(1),f=b(p),m=n(34),y=b(n(467)),h=(b(n(144)),n(54)),g=b(n(91)),v=b(n(114));function b(e){return e&&e.__esModule?e:{default:e}}function I(e){return function(){var t=e.apply(this,arguments);return new a.default(function(e,n){return function r(s,o){try{var i=t[s](o),c=i.value}catch(e){return void n(e)}if(!i.done)return a.default.resolve(c).then(function(e){r("next",e)},function(e){r("throw",e)});e(c)}("next")})}}var w={id:d.default.string,appType:d.default.string,filterRefUrl:d.default.string,refCode:d.default.string,properties:d.default.object,onBpmFlowClick:d.default.func,onStart:d.default.func,onEnd:d.default.func,onSuccess:d.default.func,onError:d.default.func,onChangestate:d.default.func},k=function(e){function t(e){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||(0,l.default)(t)).call(this,e));return a.componentWillMount=function(){},a.componentDidMount=function(){"2"==a.props.appType&&a.setState({approvetype:"withdraw",comment:(0,h.approvetypeToText)("withdraw")},function(){a.props.onChangestate(a.state)})},a.handleChange=function(e){a.setState({approvetype:e,comment:(0,h.approvetypeToText)(e),userName:"",userIds:[],userId:[],checkedArray:[]},function(){a.props.onChangestate(a.state)})},a.handlerCommentChange=function(e){a.setState({comment:e.target.value},function(){a.props.onChangestate(a.state)},function(){a.props.onChangestate(a.state)})},a.activityModalClose=function(){a.setState({rejectToActivityShow:!1,rejectlist:[],selectedRow:[]},function(){a.props.onChangestate(a.state)})},a.rejectToActivityOK=I(c.default.mark(function e(){var t,r,s,o,i;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.props,r=t.onStart,t.onEnd,s=t.onSuccess,o=t.onError,r&&r(),e.next=4,(0,h.sendBpmTaskAJAX)("rejectToBillMaker",{activityId:a.state.activityId,approvetype:a.state.approvetype,comment:a.state.comment,processInstanceId:a.state.processInstanceId,taskId:a.state.taskId}).catch(function(e){m.Message.create({content:""+e.toString(),color:"danger",position:"top"}),o&&o({type:2,msg:"服务器请求错误"})});case 4:"success"==(i=e.sent).data.flag?(s&&s(),m.Message.create({content:""+i.data.msg,color:"info",position:"top"}),a.setState({rejectToActivityShow:!1,rejectlist:[],selectedRow:[]},function(){a.props.onChangestate(a.state)})):(m.Message.create({content:""+i.data.msg,color:"danger",position:"top"}),o&&o({type:2,msg:i.data.msg}));case 6:case"end":return e.stop()}},e,n)})),a.handlerFlow=function(){var e=a.props.onBpmFlowClick;e&&e()},a.getDataSource=function(){var e=[{key:"同意",value:"agree"}],t=a.props.properties,n=t.addsignAble,r=t.rejectAble,s=t.delegateAble,o=t.unagreeable,i=t.deleteable;return o&&e.push({key:"不同意",value:"unagree"}),r&&e.push({key:"驳回到环节",value:"rejectToActivity"}),i&&e.push({key:"驳回到制单人",value:"rejectToBillMaker"}),n&&e.push({key:"加签",value:"signAdd"}),s&&e.push({key:"改派",value:"delegate"}),e},a.rejectToActivity=I(c.default.mark(function e(){var t,r;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.props.onError,e.next=3,(0,h.sendBpmTaskAJAX)(a.state.approvetype,a.state);case 3:"success"==(r=e.sent).data.flag&&r.data.rejectlist.length>0?a.setState({rejectlist:r.data.rejectlist,selectedRow:new Array(r.data.rejectlist.length),rejectToActivityShow:!0}):(m.Message.create({content:r.data.msg||"当前环节没有可被驳回的环节",color:"warning",position:"top"}),t&&t({type:2,msg:r.data.msg||"当前环节没有可被驳回的环节"}));case 5:case"end":return e.stop()}},e,n)})),a.state={approvetype:"agree",comment:"审批同意",processDefinitionId:e.processDefinitionId,processInstanceId:e.processInstanceId,taskId:e.id,activityId:"",activityName:"",rejectToActivityShow:!1,rejectlist:[],selectedRow:[],userIds:[],userId:[],userName:[],checkedArray:[],HuoDongID:"",HuoDongName:""},a.rejectToActivityCol=[{title:"活动名称",dataIndex:"activityName",key:"activityName",textAlign:"center"}],a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=(0,o.default)(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(s.default?(0,s.default)(e,t):e.__proto__=t)}(t,p.Component),u(t,[{key:"render",value:function(){var e=this,t=this,n={title:"delegate"===t.state.approvetype?"改派人员选择":"加签人员选择",backdrop:!1,hasPage:!0,refType:"delegate"===t.state.approvetype?2:5,isRadio:"delegate"===t.state.approvetype,className:"",emptyBtn:!0,param:{refCode:"delegate"===t.state.approvetype?"relatedUser":"userUnderOrgRef",tenantId:"",sysId:"",cfgParam:!0,transmitParam:"EXAMPLE_CONTACTS,EXAMPLE_ORGANIZATION"},textOption:{modalTitle:"选择加签人员",leftTitle:"组织结构",rightTitle:"人员列表",leftTransferText:"待选人员",rightTransferText:"已选人员"},checkedArray:t.state.checkedArray,onCancel:function(e){console.log(e)},onSave:function(e,n){var a=e.map(function(e){return e.id}),r=t.state.userName;r=n;var s=t.state.userIds;s=a,t.setState({userId:s[0],userIds:s,userName:r,checkedArray:e},function(){t.props.onChangestate(t.state)})},showVal:this.state.userName,showKey:"refname",verification:!1};return f.default.createElement("div",{className:"clearfix"},f.default.createElement("div",{style:{padding:"0px"}},"1"==this.props.appType&&f.default.createElement("div",null,f.default.createElement(m.Row,{style:{margin:"8px 0",padding:"0 10px"}},f.default.createElement(m.Col,{md:2,sm:2,xs:3,style:{paddingLeft:0,paddingRight:"15px"}},f.default.createElement(y.default,{style:{width:"100%"},placeholder:"请选择",onChange:t.handleChange,defaultValue:"agree",data:t.getDataSource()})),f.default.createElement(m.Col,{md:3,xs:3,sm:3,style:{paddingLeft:0}},"signAdd"===this.state.approvetype&&f.default.createElement(v.default,{disabled:!1,option:(0,i.default)(JSON.parse(g.default),n)}),"delegate"===this.state.approvetype&&f.default.createElement(v.default,{disabled:!1,option:(0,i.default)(JSON.parse(g.default),n)}),"rejectToActivity"===this.state.approvetype&&f.default.createElement(m.FormControl,{readOnly:!0,placeholder:"请选择环节",value:this.state.activityName,onClick:this.rejectToActivity,onChange:this.onChange})),f.default.createElement(m.Col,{md:4,mdOffset:3,xs:4,xsOffset:2,sm:4,smOffset:3,style:{textAlign:"right",paddingRight:0}},"1"==this.props.appType&&f.default.createElement(m.Button,{onClick:this.handlerFlow,colors:"primary"},"流程图"))),f.default.createElement(m.Row,{style:{padding:"0 10px"}},f.default.createElement(m.Col,{md:12},f.default.createElement("textarea",{style:{height:"75px",width:"100%",outline:"none",resize:"none",border:"1px solid #cecece",padding:"10px",marginBottom:"20px",borderRadius:"4px"},placeholder:"请输入处理意见",value:this.state.comment,onChange:this.handlerCommentChange})))),"2"==this.props.appType&&f.default.createElement("div",null,f.default.createElement(m.Row,{style:{height:"46px",lineHeight:"46px",padding:"0 10px"}},f.default.createElement(m.Col,{md:8},f.default.createElement(m.Radio.RadioGroup,{name:"approvetype",selectedValue:this.state.approvetype,onChange:this.handleChange},f.default.createElement(m.Radio,{value:"withdraw"},"弃审"))),f.default.createElement(m.Col,{md:4,style:{textAlign:"right"}},"2"==this.props.appType&&f.default.createElement(m.Button,{onClick:this.handlerFlow,colors:"primary"},"流程图"))),f.default.createElement(m.Row,{style:{padding:"0 10px"}},f.default.createElement(m.Col,{md:12},f.default.createElement("textarea",{style:{height:"75px",width:"100%",outline:"none",resize:"none",border:"1px solid #cecece",padding:"10px",marginBottom:"20px",borderRadius:"4px"},placeholder:"请输入弃审意见",value:this.state.comment,onChange:this.handlerCommentChange}))))),f.default.createElement(m.Modal,{show:this.state.rejectToActivityShow,backdrop:!1,onHide:this.activityModalClose},f.default.createElement(m.Modal.Header,{closeButton:!0},f.default.createElement(m.Modal.Title,null," 活动列表 ")),f.default.createElement(m.Modal.Body,null,f.default.createElement(m.Table,{rowKey:function(e){return e.activityId},emptyText:function(){return f.default.createElement("div",null,"暂无数据")},rowClassName:function(t,n,a){return e.state.selectedRow[n]?"selected":""},onRowClick:function(t,n,a){var r=new Array(e.state.rejectlist.length);r[n]=!0,e.setState({activityId:t.activityId,activityName:t.activityName,selectedRow:r},function(){e.props.onChangestate(e.state)})},columns:this.rejectToActivityCol,data:this.state.rejectlist})),f.default.createElement(m.Modal.Footer,null,f.default.createElement(m.Button,{colors:"primary",style:{marginRight:"10px"},onClick:this.activityModalClose}," 确定 "),f.default.createElement(m.Button,{onClick:this.activityModalClose}," 关闭 "))))}}]),t}();k.propTypes=w,k.defaultProps={appType:"1",refCode:"relatedUser",filterRefUrl:"/iuap_pap_quickstart/common/filterRef",properties:{addSignAble:!0,iscopytouser:!0,rejectAble:!0,delegateAble:!0,unagreeable:!0,assignAble:!0,deleteable:!0}},t.default=k},401:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=h(n(55)),r=h(n(19)),s=h(n(24)),o=h(n(25)),i=h(n(28)),c=a.default||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),(0,r.default)(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),u=n(1),d=h(u),p=h(n(0)),f=n(34),m=h(n(8)),y=h(n(176));function h(e){return e&&e.__esModule?e:{default:e}}var g={panelOpen:p.default.bool,reset:p.default.func,title:p.default.string,filterRefUrl:p.default.string,organrefCode:p.default.string,positonrefCode:p.default.string,refCode:p.default.string,onCopyusersChange:p.default.func,onintersectionChange:p.default.func},v=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||(0,i.default)(t)).call(this));return e.open=function(){e.setState({panelOpen:!e.state.panelOpen})},e.changeCheck=function(){e.setState({intersection:!e.state.intersection})},e.state={panelOpen:!0,copyusers:[],copyuserShowVal:[],intersection:!0},e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=(0,o.default)(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(s.default?(0,s.default)(e,t):e.__proto__=t)}(t,u.Component),l(t,[{key:"render",value:function(){var e=this;return d.default.createElement(f.Panel,{className:"copy-panel",style:{borderRadius:"0!important",border:"none!important",borderBottom:"1px solid transparent!important"},header:d.default.createElement("div",{className:"clearfix",onClick:e.open},d.default.createElement("span",{className:"copy-panel-title",style:{float:"left",color:"#434A54",fontSize:"14px"}},e.props.title),d.default.createElement("span",{className:"copy-panel-icon",style:{float:"right",color:"#1E7BE2",fontSize:"14px"}},e.state.panelOpen?"展开":"收起",d.default.createElement("i",{className:(0,m.default)({uf:!0,"uf-arrow-down":!e.state.panelOpen,"uf-arrow-right":e.state.panelOpen})}))),collapsible:!0,expanded:this.state.searchOpen},d.default.createElement("div",{className:"clearfix"},d.default.createElement(y.default,c({onCopyusersChange:this.props.onCopyusersChange},this.props,{onintersectionChange:this.props.onintersectionChange}))))}}]),t}();v.propTypes=g,v.defaultProps={panelOpen:!1,selectResult:function(){},reset:function(){},title:"抄送(选填)",filterRefUrl:"/iuap_pap_quickstart/common/filterRef",refCode:"relatedUser",organrefCode:"newdept",positonrefCode:"newposition",roleRef:"newrole",userRef:"relatedUser"},t.default=v},407:function(e,t,n){"use strict";var a=o(n(1)),r=o(n(3)),s=o(n(412));function o(e){return e&&e.__esModule?e:{default:e}}r.default.render(a.default.createElement(s.default,null),document.querySelector("#app"))},412:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=p(n(19)),r=p(n(24)),s=p(n(25)),o=p(n(28)),i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),(0,a.default)(e,r.key,r)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),c=n(1),l=p(c),u=n(34),d=n(427);function p(e){return e&&e.__esModule?e:{default:e}}n(937);var f=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||(0,o.default)(t)).call(this));return e.state={},e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=(0,s.default)(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(r.default?(0,r.default)(e,t):e.__proto__=t)}(t,c.Component),i(t,[{key:"render",value:function(){return l.default.createElement("div",null,l.default.createElement(d.BpmTaskApprovalWrap,{onSuccess:function(){return console.log("success")},onError:function(e){return console.log(e)},appType:"1",id:"3be26f2debb442d9b5f8012ba40c3fa3"}),l.default.createElement(d.BpmLinkAssign,null),l.default.createElement(d.BpmFlowChart,{processDefinitionId:"eiap350694:3:e2e70948-9559-11e8-b376-02420cbf1b08",processInstanceId:"1352ad87-955e-11e8-b376-02420cbf1b08"}),l.default.createElement(d.BpmTable,{processDefinitionId:"eiap350694:3:e2e70948-9559-11e8-b376-02420cbf1b08",processInstanceId:"1352ad87-955e-11e8-b376-02420cbf1b08"}),l.default.createElement(d.BpmTestCheckTable,null),l.default.createElement(d.BpmButtonSubmit,{funccode:"f3d51126-c5dd-4d23-9c23-9040e405cb37",nodekey:"003",size:"lg",isOne:!1,url:"/iuapmdm/modeling/mdmshow/flowdata/submit",urlAssignSubmit:"/iuapmdm/modeling/mdmshow/flowdata/assignSubmit",params:{pk_gd:"f3d51126-c5dd-4d23-9c23-9040e405cb37",main:'{"mdm_datastatus":"3","mdm_duplicate":0,"dr":0,"mdm_code":"lctest00100000002","mdm_version":1,"name":"ee","code":"ee","pk_mdm":"ba295cb8-cbed-4c46-9bb7-33ead604ae1f"}',sub:""},onSuccess:function(){return console.log("success")},onError:function(e){return console.log(e)}},l.default.createElement(u.Button,{size:"sm",shape:"border",className:"admin"},l.default.createElement("i",{className:"uf uf-arrow-c-o-up"}),"提交")),l.default.createElement(d.BpmButtonRecall,{url:"/iuapmdm/modeling/mdmshow/flowdata/unsubmit",params:{pk_gd:"f3d51126-c5dd-4d23-9c23-9040e405cb37",pk_mdm:"ba295cb8-cbed-4c46-9bb7-33ead604ae1f"}},l.default.createElement(u.Button,{size:"sm",shape:"border",className:"admin"},l.default.createElement("i",{className:"uf uf-arrow-c-o-down"}),"收回")))}}]),t}();t.default=f},427:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BpmTaskCopyPanel=t.BpmCopyContent=t.BpmLinkAssign=t.BpmButtonRecall=t.BpmButtonSubmit=t.BpmTaskApprovalWrap=t.BpmWrap=t.BpmTestCheckTable=t.BpmTaskApproval=t.BpmFlowChart=t.BpmTable=void 0;var a=m(n(188)),r=m(n(204)),s=m(n(205)),o=m(n(931)),i=m(n(932)),c=m(n(933)),l=m(n(934)),u=m(n(935)),d=m(n(936)),p=m(n(176)),f=m(n(401));function m(e){return e&&e.__esModule?e:{default:e}}t.BpmTable=a.default,t.BpmFlowChart=r.default,t.BpmTaskApproval=s.default,t.BpmTestCheckTable=o.default,t.BpmWrap=i.default,t.BpmTaskApprovalWrap=c.default,t.BpmButtonSubmit=l.default,t.BpmButtonRecall=u.default,t.BpmLinkAssign=d.default,t.BpmCopyContent=p.default,t.BpmTaskCopyPanel=f.default},54:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.reconvert=t.approvetypeToText=t.onRecall=t.onCommit=t.queryBpmTemplateAllocate=t.billidToIds=t.sendBpmTaskAJAX=t.getBpmTaskURL=t.recordToState=t.descriptionToText=t.timestampToDate=void 0;var a=function(e){return e&&e.__esModule?e:{default:e}}(n(97)),r=n(34);t.timestampToDate=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"yyyy-MM-dd  hh:mm:ss",n=new Date(e),a=t;a=(a=a.replace(/yyyy|YYYY/,n.getFullYear())).replace(/yy|YY/,n.getYear()%100>9?(n.getYear()%100).toString():"0"+n.getYear()%100);var r=n.getMonth()+1;return a=(a=(a=(a=(a=(a=(a=(a=(a=(a=(a=a.replace(/MM/,r>9?r.toString():"0"+r)).replace(/M/g,r)).replace(/w|W/g,["日","一","二","三","四","五","六"][n.getDay()])).replace(/dd|DD/,n.getDate()>9?n.getDate().toString():"0"+n.getDate())).replace(/d|D/g,n.getDate())).replace(/hh|HH/,n.getHours()>9?n.getHours().toString():"0"+n.getHours())).replace(/h|H/g,n.getHours())).replace(/mm/,n.getMinutes()>9?n.getMinutes().toString():"0"+n.getMinutes())).replace(/m/g,n.getMinutes())).replace(/ss|SS/,n.getSeconds()>9?n.getSeconds().toString():"0"+n.getSeconds())).replace(/s|S/g,n.getSeconds())},t.descriptionToText=function(e){return"submit"==e?"提交":"agree"==e?"审批":"unagree"==e?"不同意":"reject"==e?"驳回":"signAdd"==e?"加签":"signAdding"==e?"加签中":"delegate"==e?"改派":"termination"==e?"终止":"withdraw"==e?"删除":"postCompleted"==e?"审批":void 0},t.recordToState=function(e){return"withdraw"===e.description?"已完成":e.endTime&&e.startTime?"已完成":e.claimTime&&new Date>e.claimTime?"已逾期":"审批中"};var s=t.getBpmTaskURL=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"/eiap-plus/";switch(e){case"agree":case"unagree":return t+"task/completetask/approveCard";case"rejectToActivity":return t+"task/rejecttask/bfreject";case"rejectToBillMaker":return t+"task/rejecttask/reject";case"signAdd":case"delegate":return t+"task/assignee/getlist";case"withdraw":return t+"task/withdrawtask/withdraw";case"hisTasklist":return t+"process/hisTasklist";case"commit":return t+"task/assigntask/commit";case"signaddtask":return t+"task/signaddtask/signadd";case"delegatetask":return t+"task/delegatetask/delegate";default:return"/"}};t.sendBpmTaskAJAX=function(e,t){switch(e){case"agree":case"unagree":return a.default.post(s(e),{approvetype:t.approvetype,comment:t.comment,processDefinitionId:t.processDefinitionId,processInstanceId:t.processInstanceId,taskId:t.taskId,copyusers:t.copyusers,intersection:t.intersection}).catch(function(e){e.response&&401==e.response.status?r.Message.create({content:e.response.data&&e.response.data.msg,color:"danger",position:"top"}):r.Message.create({content:""+e.toString(),color:"danger",position:"top"})});case"rejectToActivity":return a.default.post(s(e),{approvetype:t.approvetype,comment:t.comment,processDefinitionId:t.processDefinitionId,processInstanceId:t.processInstanceId,taskId:t.taskId}).catch(function(e){e.response&&401==e.response.status?r.Message.create({content:e.response.data&&e.response.data.msg,color:"danger",position:"top"}):r.Message.create({content:""+e.toString(),color:"danger",position:"top"})});case"rejectToBillMaker":return a.default.post(s(e),{activityId:t.activityId,approvetype:t.approvetype,comment:t.comment,processInstanceId:t.processInstanceId,taskId:t.taskId,copyusers:t.copyusers,intersection:t.intersection}).catch(function(e){e.response&&401==e.response.status?r.Message.create({content:e.response.data&&e.response.data.msg,color:"danger",position:"top"}):r.Message.create({content:""+e.toString(),color:"danger",position:"top"})});case"signAdd":case"delegate":case"withdraw":return a.default.post(s(e),{approvetype:t.approvetype,comment:t.comment,processDefinitionId:t.processDefinitionId,processInstanceId:t.processInstanceId,taskId:t.taskId}).catch(function(e){e.response&&401==e.response.status?r.Message.create({content:e.response.data&&e.response.data.msg,color:"danger",position:"top"}):r.Message.create({content:""+e.toString(),color:"danger",position:"top"})});case"hisTasklist":return a.default.post(s(e),{processDefinitionId:t.processDefinitionId,processInstanceId:t.processInstanceId}).catch(function(e){e.response&&401==e.response.status?r.Message.create({content:e.response.data&&e.response.data.msg,color:"danger",position:"top"}):r.Message.create({content:""+e.toString(),color:"danger",position:"top"})});case"commit":return a.default.post(s(e),{activityId:t.activityId,activityName:t.activityName,comment:t.comment,taskId:t.taskId,approvetype:t.approvetype,processInstanceId:t.processInstanceId,participants:t.participants}).catch(function(e){e.response&&401==e.response.status?r.Message.create({content:e.response.data&&e.response.data.msg,color:"danger",position:"top"}):r.Message.create({content:""+e.toString(),color:"danger",position:"top"})});case"signaddtask":return a.default.post(s(e),{approvetype:t.approvetype,comment:t.comment,processInstanceId:t.processInstanceId,taskId:t.taskId,userIds:t.userIds,copyusers:t.copyusers,intersection:t.intersection}).catch(function(e){e.response&&401==e.response.status?r.Message.create({content:e.response.data&&e.response.data.msg,color:"danger",position:"top"}):r.Message.create({content:""+e.toString(),color:"danger",position:"top"})});case"delegatetask":return a.default.post(s(e),{approvetype:t.approvetype,comment:t.comment,processInstanceId:t.processInstanceId,taskId:t.taskId,userId:t.userId,copyusers:t.copyusers,intersection:t.intersection}).catch(function(e){e.response&&401==e.response.status?r.Message.create({content:e.response.data&&e.response.data.msg,color:"danger",position:"top"}):r.Message.create({content:""+e.toString(),color:"danger",position:"top"})})}return a.default.post(s(e),t).catch(function(e){e.response&&401==e.response.status?r.Message.create({content:e.response.data&&e.response.data.msg,color:"danger",position:"top"}):r.Message.create({content:""+e.toString(),color:"danger",position:"top"})})},t.billidToIds=function(e){return a.default.post("/eiap-plus/process/getbillbpm",{billId:e})},t.queryBpmTemplateAllocate=function(e){return a.default.get("/eiap-plus/appResAllocate/queryBpmTemplateAllocate?_="+Math.random(),{params:{funccode:e.funccode,nodekey:e.nodekey}})},t.onCommit=function(e){return(0,a.default)({url:""+e.url,method:"post",data:e.params?e.params:e.submitArray,params:{processDefineCode:e.processDefineCode}})},t.onRecall=function(e,t){return(0,a.default)({url:""+e,method:"post",data:t})},t.approvetypeToText=function(e){switch(e){case"agree":return"审批同意";case"unagree":return"审批不同意";case"rejectToActivity":return"驳回到环节";case"rejectToBillMaker":return"驳回到制单人";case"signAdd":return"加签";case"delegate":return"改派";case"withdraw":return"弃审"}},t.reconvert=function(e){return e=(e=(e=(e=e||"").replace(/(\\u)(\w{1,4})/gi,function(e){return String.fromCharCode(parseInt(escape(e).replace(/(%5Cu)(\w{1,4})/g,"$2"),16))})).replace(/(&#x)(\w{1,4});/gi,function(e){return String.fromCharCode(parseInt(escape(e).replace(/(%26%23x)(\w{1,4})(%3B)/g,"$2"),16))})).replace(/(&#)(\d{1,6});/gi,function(e){return String.fromCharCode(parseInt(escape(e).replace(/(%26%23)(\d{1,6})(%3B)/g,"$2")))})}},612:function(e,t,n){var a={"./af":233,"./af.js":233,"./ar":234,"./ar-dz":235,"./ar-dz.js":235,"./ar-kw":236,"./ar-kw.js":236,"./ar-ly":237,"./ar-ly.js":237,"./ar-ma":238,"./ar-ma.js":238,"./ar-sa":239,"./ar-sa.js":239,"./ar-tn":240,"./ar-tn.js":240,"./ar.js":234,"./az":241,"./az.js":241,"./be":242,"./be.js":242,"./bg":243,"./bg.js":243,"./bm":244,"./bm.js":244,"./bn":245,"./bn.js":245,"./bo":246,"./bo.js":246,"./br":247,"./br.js":247,"./bs":248,"./bs.js":248,"./ca":249,"./ca.js":249,"./cs":250,"./cs.js":250,"./cv":251,"./cv.js":251,"./cy":252,"./cy.js":252,"./da":253,"./da.js":253,"./de":254,"./de-at":255,"./de-at.js":255,"./de-ch":256,"./de-ch.js":256,"./de.js":254,"./dv":257,"./dv.js":257,"./el":258,"./el.js":258,"./en-SG":259,"./en-SG.js":259,"./en-au":260,"./en-au.js":260,"./en-ca":261,"./en-ca.js":261,"./en-gb":105,"./en-gb.js":105,"./en-ie":262,"./en-ie.js":262,"./en-il":263,"./en-il.js":263,"./en-nz":264,"./en-nz.js":264,"./eo":265,"./eo.js":265,"./es":266,"./es-do":267,"./es-do.js":267,"./es-us":268,"./es-us.js":268,"./es.js":266,"./et":269,"./et.js":269,"./eu":270,"./eu.js":270,"./fa":271,"./fa.js":271,"./fi":272,"./fi.js":272,"./fo":273,"./fo.js":273,"./fr":274,"./fr-ca":275,"./fr-ca.js":275,"./fr-ch":276,"./fr-ch.js":276,"./fr.js":274,"./fy":277,"./fy.js":277,"./ga":278,"./ga.js":278,"./gd":279,"./gd.js":279,"./gl":280,"./gl.js":280,"./gom-latn":281,"./gom-latn.js":281,"./gu":282,"./gu.js":282,"./he":283,"./he.js":283,"./hi":284,"./hi.js":284,"./hr":285,"./hr.js":285,"./hu":286,"./hu.js":286,"./hy-am":287,"./hy-am.js":287,"./id":288,"./id.js":288,"./is":289,"./is.js":289,"./it":290,"./it-ch":291,"./it-ch.js":291,"./it.js":290,"./ja":292,"./ja.js":292,"./jv":293,"./jv.js":293,"./ka":294,"./ka.js":294,"./kk":295,"./kk.js":295,"./km":296,"./km.js":296,"./kn":297,"./kn.js":297,"./ko":298,"./ko.js":298,"./ku":299,"./ku.js":299,"./ky":300,"./ky.js":300,"./lb":301,"./lb.js":301,"./lo":302,"./lo.js":302,"./lt":303,"./lt.js":303,"./lv":304,"./lv.js":304,"./me":305,"./me.js":305,"./mi":306,"./mi.js":306,"./mk":307,"./mk.js":307,"./ml":308,"./ml.js":308,"./mn":309,"./mn.js":309,"./mr":310,"./mr.js":310,"./ms":311,"./ms-my":312,"./ms-my.js":312,"./ms.js":311,"./mt":313,"./mt.js":313,"./my":314,"./my.js":314,"./nb":315,"./nb.js":315,"./ne":316,"./ne.js":316,"./nl":317,"./nl-be":318,"./nl-be.js":318,"./nl.js":317,"./nn":319,"./nn.js":319,"./pa-in":320,"./pa-in.js":320,"./pl":321,"./pl.js":321,"./pt":322,"./pt-br":323,"./pt-br.js":323,"./pt.js":322,"./ro":324,"./ro.js":324,"./ru":325,"./ru.js":325,"./sd":326,"./sd.js":326,"./se":327,"./se.js":327,"./si":328,"./si.js":328,"./sk":329,"./sk.js":329,"./sl":330,"./sl.js":330,"./sq":331,"./sq.js":331,"./sr":332,"./sr-cyrl":333,"./sr-cyrl.js":333,"./sr.js":332,"./ss":334,"./ss.js":334,"./sv":335,"./sv.js":335,"./sw":336,"./sw.js":336,"./ta":337,"./ta.js":337,"./te":338,"./te.js":338,"./tet":339,"./tet.js":339,"./tg":340,"./tg.js":340,"./th":341,"./th.js":341,"./tl-ph":342,"./tl-ph.js":342,"./tlh":343,"./tlh.js":343,"./tr":344,"./tr.js":344,"./tzl":345,"./tzl.js":345,"./tzm":346,"./tzm-latn":347,"./tzm-latn.js":347,"./tzm.js":346,"./ug-cn":348,"./ug-cn.js":348,"./uk":349,"./uk.js":349,"./ur":350,"./ur.js":350,"./uz":351,"./uz-latn":352,"./uz-latn.js":352,"./uz.js":351,"./vi":353,"./vi.js":353,"./x-pseudo":354,"./x-pseudo.js":354,"./yo":355,"./yo.js":355,"./zh-cn":67,"./zh-cn.js":67,"./zh-hk":356,"./zh-hk.js":356,"./zh-tw":357,"./zh-tw.js":357};function r(e){var t=s(e);return n(t)}function s(e){if(!n.o(a,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return a[e]}r.keys=function(){return Object.keys(a)},r.resolve=s,e.exports=r,r.id=612},91:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(e){return e&&e.__esModule?e:{default:e}}(n(173));var r={title:"",refType:2,className:"",param:{refCode:"bd_common_user",tenantId:"",sysId:"",transmitParam:"EXAMPLE_CONTACTS,EXAMPLE_ORGANIZATION"},refModelUrl:{TreeUrl:"/newref/rest/iref_ctr/blobRefTree",TableBodyUrl:"/newref/rest/iref_ctr/blobRefTreeGrid",TableBarUrl:"/newref/rest/iref_ctr/refInfo"},filterRefUrl:"/iuap_pap_quickstart/common/filterRef",onCancel:function(e){console.log(e)},filterKey:[{title:"人员名称人员名称人员名称",key:"peoname"},{title:"人员名称",key:"peoname"},{title:"人员名称",key:"peoname"},{title:"人员名称",key:"peoname"},{title:"人员名称",key:"peoname"},{title:"人员名称",key:"peoname"},{title:"人员名称",key:"peoname"},{title:"人员名称",key:"peoname"},{title:"人员名称",key:"peoname"},{title:"人员名称",key:"peoname"},{title:"人员名称",key:"peoname"}],textOption:{modalTitle:"选择品类",leftTitle:"品类结构",rightTitle:"品类列表",leftTransferText:"待选品类",rightTransferText:"已选品类",leftInfo:[{text:"流水号",key:"peoname"},{text:"品类编码",key:"institid"},{text:"品类描述",key:"refname"}],rightInfo:[{text:"流水号",key:"id"},{text:"品类编码",key:"id"},{text:"品类描述",key:"peocode"}]}};t.default=(0,a.default)(r)},931:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=m(n(37)),r=m(n(19)),s=m(n(24)),o=m(n(25)),i=m(n(48)),c=m(n(28)),l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),(0,r.default)(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),u=n(1),d=m(u),p=n(34),f=m(n(97));function m(e){return e&&e.__esModule?e:{default:e}}var y=function(e){function t(){var e=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||(0,c.default)(t)).call(this));return n.componentDidMount=function(e){return function(){var t=e.apply(this,arguments);return new a.default(function(e,n){return function r(s,o){try{var i=t[s](o),c=i.value}catch(e){return void n(e)}if(!i.done)return a.default.resolve(c).then(function(e){r("next",e)},function(e){r("throw",e)});e(c)}("next")})}}(i.default.mark(function t(){var a,r;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a="eiap-plus/process/undoTasklist",e.next=3,f.default.post(a,{draw:1,length:10,order:{},search:{search_EQ_code:"",undefined:"",processDefinitionName:"",billno:""},searchconfirm:{}});case 3:r=e.sent,Array.isArray(r.data.data)&&n.setState({data:r.data.data});case 5:case"end":return e.stop()}},t,e)})),n.state={data:[],factoryValue:{}},n.columns=[{title:"Name",dataIndex:"name",key:"name"},{title:"ID",dataIndex:"id",key:"id"},{title:"processDefinitionId",dataIndex:"processDefinitionId",key:"processDefinitionId"},{title:"processInstanceId",dataIndex:"processInstanceId",key:"processInstanceId"}],n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=(0,o.default)(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(s.default?(0,s.default)(e,t):e.__proto__=t)}(t,u.Component),l(t,[{key:"render",value:function(){var e=this;return d.default.createElement(p.Table,{bordered:!0,emptyText:function(){return d.default.createElement("span",null,"暂时没有数据")},columns:this.columns,data:this.state.data,title:function(){return d.default.createElement(p.Button,{colors:"primary",onClick:function(){document.location.hash="#/bdm/bpmapproval?id="+e.state.factoryValue.id+"&processDefinitionId="+e.state.factoryValue.processDefinitionId+"&processInstanceId="+e.state.factoryValue.processInstanceId}},"任务中心打开审批")},onRowClick:function(t,n,a){e.setState({factoryValue:t})}})}}]),t}();t.default=y},932:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=g(n(37)),r=g(n(19)),s=g(n(24)),o=g(n(25)),i=g(n(48)),c=g(n(28)),l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),(0,r.default)(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),u=n(1),d=g(u),p=g(n(0)),f=n(34),m=g(n(204)),y=g(n(188)),h=n(54);function g(e){return e&&e.__esModule?e:{default:e}}var v={id:p.default.string,processDefinitionId:p.default.string,processInstanceId:p.default.string},b=function(e){function t(){var e=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||(0,c.default)(t)).call(this));return n.componentWillMount=function(e){return function(){var t=e.apply(this,arguments);return new a.default(function(e,n){return function r(s,o){try{var i=t[s](o),c=i.value}catch(e){return void n(e)}if(!i.done)return a.default.resolve(c).then(function(e){r("next",e)},function(e){r("throw",e)});e(c)}("next")})}}(i.default.mark(function t(){var a,r,s,o;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n.props.processDefinitionId){e.next=8;break}return e.next=3,(0,h.billidToIds)(n.props.id);case 3:a=e.sent,r=a.data,s=r.processDefinitionId,o=r.processInstanceId,n.setState({processDefinitionId:s,processInstanceId:o}),e.next=9;break;case 8:n.setState({processDefinitionId:n.props.processDefinitionId,processInstanceId:n.props.processInstanceId});case 9:case"end":return e.stop()}},t,e)})),n.state={processDefinitionId:"",processInstanceId:""},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=(0,o.default)(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(s.default?(0,s.default)(e,t):e.__proto__=t)}(t,u.Component),l(t,[{key:"render",value:function(){return d.default.createElement("div",null,d.default.createElement(f.Row,null,d.default.createElement(f.Col,{md:12},this.state.processDefinitionId&&d.default.createElement(m.default,{processDefinitionId:this.state.processDefinitionId,processInstanceId:this.state.processInstanceId}))),d.default.createElement(f.Row,null,d.default.createElement(f.Col,{md:12},this.state.processDefinitionId&&d.default.createElement(y.default,{processDefinitionId:this.state.processDefinitionId,processInstanceId:this.state.processInstanceId}))))}}]),t}();b.propTypes=v,b.defaultProps={id:""},t.default=b},933:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=w(n(37)),r=w(n(19)),s=w(n(24)),o=w(n(25)),i=w(n(90)),c=w(n(55)),l=w(n(48)),u=w(n(28)),d=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),(0,r.default)(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),p=n(1),f=w(p),m=w(n(0)),y=n(34),h=w(n(205)),g=n(54),v=w(n(91)),b=w(n(144)),I=w(n(401));function w(e){return e&&e.__esModule?e:{default:e}}function k(e){return function(){var t=e.apply(this,arguments);return new a.default(function(e,n){return function r(s,o){try{var i=t[s](o),c=i.value}catch(e){return void n(e)}if(!i.done)return a.default.resolve(c).then(function(e){r("next",e)},function(e){r("throw",e)});e(c)}("next")})}}var T={id:m.default.string,refCode:m.default.string,processDefinitionId:m.default.string,processInstanceId:m.default.string,onBpmFlowClick:m.default.func,appType:m.default.string,onStart:m.default.func,onEnd:m.default.func,onSuccess:m.default.func,onError:m.default.func},j=function(e){function t(){var e=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||(0,u.default)(t)).call(this));return n.componentWillMount=k(l.default.mark(function t(){var a,r,s,o,i,c,u,d,p,f,m,y,h;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n.props.processDefinitionId){e.next=7;break}return e.next=3,(0,g.billidToIds)(n.props.id);case 3:(a=e.sent).data.message&&"NoBpm"==a.data.message?n.setState({isShowFlowBtn:!1}):a.data.taskId?(r=a.data,s=r.processDefinitionId,o=r.processInstanceId,i=r.taskId,c=a.data.currentActivity.properties,u=c.addsignAble,d=c.iscopytouser,p=c.rejectAble,f=c.delegateAble,m=c.unagreeable,y=c.assignAble,h=c.deleteable,n.setState({id:i,taskId:i,properties:{addsignAble:u,iscopytouser:d,rejectAble:p,delegateAble:f,unagreeable:m,assignAble:y,deleteable:h},processDefinitionId:s,processInstanceId:o})):n.setState({isShowFlowBtn:!0}),e.next=8;break;case 7:n.setState({processDefinitionId:n.props.processDefinitionId,processInstanceId:n.props.processInstanceId,id:n.props.id});case 8:case"end":return e.stop()}},t,e)})),n.handlerSubmitBtn=k(l.default.mark(function t(){var a,r,s,o,u,d,p,f,m,h,I,w,T,j,E,S,C,_;return l.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(a=n.props,r=a.onStart,s=a.onEnd,o=a.onSuccess,u=a.onError,""!=n.state.comment){t.next=4;break}return y.Message.create({content:"审批意见不能为空",color:"danger",position:"top"}),t.abrupt("return");case 4:r&&r(n.state.approvetype),t.t0=n.state.approvetype,t.next="agree"===t.t0?8:"unagree"===t.t0?8:"rejectToActivity"===t.t0?14:"signAdd"===t.t0?24:"delegate"===t.t0?34:"withdraw"===t.t0?44:"rejectToBillMaker"===t.t0?49:54;break;case 8:return t.next=10,(0,g.sendBpmTaskAJAX)(n.state.approvetype,n.state);case 10:return"success"==(d=t.sent).data.flag?(y.Message.create({content:d.data.msg,color:"info",position:"top"}),o&&o(n.state.approvetype)):"faile"==d.data.flag&&(y.Message.create({content:d.data.msg,color:"danger",position:"top"}),u&&u({type:2,msg:d.data.msg})),d.data.assignAble&&(d.data.assignList.length>0&&n.setState({HuoDongID:d.data.assignList[0].activityId,HuoDongName:d.data.assignList[0].activityName}),s&&s(n.state.approvetype),p=(0,c.default)(JSON.parse(v.default),{title:"指派人员选择",backdrop:!1,hasPage:!0,refType:5,isRadio:!1,className:"",param:{refCode:n.props.refCode,tenantId:"",sysId:"",transmitParam:"EXAMPLE_CONTACTS,EXAMPLE_ORGANIZATION"},checkedArray:[],textOption:{modalTitle:"选择指派人员",leftTitle:"组织结构",rightTitle:"人员列表",leftTransferText:"待选人员",rightTransferText:"已选人员"},onCancel:function(e){console.log(e)},onSave:function(){var t=k(l.default.mark(function t(a,s){var c;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r&&r(n.state.approvetype),e.next=3,(0,g.sendBpmTaskAJAX)("commit",{activityId:n.state.HuoDongID,activityName:n.state.HuoDongName,comment:n.state.comment,taskId:n.state.taskId,approvetype:n.state.approvetype,processInstanceId:n.state.processInstanceId,participants:(0,i.default)(a,function(e){return{id:e.id}})}).catch(function(e){y.Message.create({content:""+e.toString(),color:"danger",position:"top"}),u&&u({type:2,msg:"服务器请求出错"})});case 3:"success"==(c=e.sent).data.flag?(y.Message.create({content:""+c.data.msg,color:"info",position:"top"}),n.setState({rejectlist:[],selectedRow:[]}),o&&o(n.state.approvetype)):(y.Message.create({content:""+c.data.msg,color:"danger",position:"top"}),u&&u({type:2,msg:c.data.msg}));case 5:case"end":return e.stop()}},t,e)}));return function(e,n){return t.apply(this,arguments)}}(),showVal:"",showKey:"refname",verification:!1}),(0,b.default)(p)),t.abrupt("break",55);case 14:if(f=n.state,m=f.activityId,h=f.approvetype,I=f.comment,w=f.processInstanceId,T=f.taskId,m&&0!==m.length){t.next=19;break}return y.Message.create({content:"驳回环节不可为空",color:"warning",position:"top"}),u&&u({type:2,msg:"驳回环节不可为空"}),t.abrupt("return");case 19:return t.next=21,(0,g.sendBpmTaskAJAX)("rejectToBillMaker",{activityId:m,approvetype:h,comment:I,processInstanceId:w,taskId:T,copyusers:n.state.copyusers,intersection:n.state.intersection}).catch(function(e){y.Message.create({content:""+e.toString(),color:"danger",position:"top"}),u&&u({type:2,msg:"服务器请求错误"})});case 21:return"success"==(j=t.sent).data.flag?(o&&o(n.state.approvetype),y.Message.create({content:""+j.data.msg,color:"info",position:"top"}),n.setState({rejectToActivityShow:!1,rejectlist:[],selectedRow:[]})):(y.Message.create({content:""+j.data.msg,color:"danger",position:"top"}),u&&u({type:2,msg:j.data.msg})),t.abrupt("break",55);case 24:if(r&&r(n.state.approvetype),n.state.userIds&&0!==n.state.userIds.length){t.next=29;break}return y.Message.create({content:"加签人员不可为空",color:"warning",position:"top"}),u&&u({type:2,msg:"加签人员不可为空"}),t.abrupt("return");case 29:return t.next=31,(0,g.sendBpmTaskAJAX)("signaddtask",{approvetype:n.state.approvetype,comment:n.state.comment,processInstanceId:n.state.processInstanceId,taskId:n.state.taskId,userIds:n.state.userIds,copyusers:n.state.copyusers,intersection:n.state.intersection}).catch(function(e){y.Message.create({content:""+e.toString(),color:"danger",position:"top"}),u&&u({type:2,msg:"服务器请求出错"})});case 31:return"success"==(E=t.sent).data.flag?(y.Message.create({content:""+E.data.msg,color:"info",position:"top"}),o&&o(n.state.approvetype)):(y.Message.create({content:""+E.data.msg,color:"danger",position:"top"}),u&&u({type:2,msg:E.data.msg})),t.abrupt("break",55);case 34:if(r&&r(n.state.approvetype),n.state.userId&&0!==n.state.userId.length){t.next=39;break}return y.Message.create({content:"改派人员不可为空",color:"warning",position:"top"}),u&&u({type:2,msg:"改派人员不可为空"}),t.abrupt("return");case 39:return t.next=41,(0,g.sendBpmTaskAJAX)("delegatetask",{approvetype:n.state.approvetype,comment:n.state.comment,processInstanceId:n.state.processInstanceId,taskId:n.state.taskId,userId:n.state.userId,copyusers:n.state.copyusers,intersection:n.state.intersection}).catch(function(e){y.Message.create({content:""+e.toString(),color:"danger",position:"top"}),u&&u({type:2,msg:"服务器请求出错"})});case 41:return"success"===(S=t.sent).data.flag?(y.Message.create({content:""+S.data.msg,color:"info",position:"top"}),o&&o(n.state.approvetype)):(y.Message.create({content:""+S.data.msg,color:"danger",position:"top"}),u&&u({type:2,msg:S.data.msg})),t.abrupt("break",55);case 44:return t.next=46,(0,g.sendBpmTaskAJAX)(n.state.approvetype,n.state);case 46:return"success"===(C=t.sent).data.flag?(y.Message.create({content:C.data.msg,color:"info",position:"top"}),o&&o(n.state.approvetype)):(y.Message.create({content:C.data.msg,color:"danger",position:"top"}),u&&u({type:2,msg:C.data.msg})),t.abrupt("break",55);case 49:return t.next=51,(0,g.sendBpmTaskAJAX)(n.state.approvetype,{activityId:"markerbill",approvetype:n.state.approvetype,comment:n.state.comment,processInstanceId:n.state.processInstanceId,taskId:n.state.taskId,copyusers:n.state.copyusers,intersection:n.state.intersection});case 51:return"success"===(_=t.sent).data.flag?(y.Message.create({content:_.data.msg,color:"info",position:"top"}),o&&o(n.state.approvetype)):(y.Message.create({content:_.data.msg,color:"danger",position:"top"}),u&&u({type:2,msg:_.data.msg})),t.abrupt("break",55);case 54:return t.abrupt("break",55);case 55:case"end":return t.stop()}},t,e)})),n.onChangestate=function(e){var t=e.approvetype,a=e.comment,r=e.taskId,s=e.activityId,o=e.userIds,i=e.userId;n.setState({approvetype:t,comment:a,taskId:r,activityId:s,userIds:o,userId:i})},n.state={isShowFlowBtn:!1,id:"",taskId:"",processDefinitionId:"",processInstanceId:"",copyusers:[],intersection:!0,approvetype:"agree",comment:"审批同意",activityId:"",userIds:[],userId:"",properties:{addSignAble:!0,iscopytouser:!0,rejectAble:!0,delegateAble:!0,unagreeable:!0,assignAble:!0,deleteable:!0}},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=(0,o.default)(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(s.default?(0,s.default)(e,t):e.__proto__=t)}(t,p.Component),d(t,[{key:"render",value:function(){var e=this;return f.default.createElement("div",{className:"clearfix"},this.state.processDefinitionId&&f.default.createElement("div",null,f.default.createElement(y.Row,null,f.default.createElement("div",null)),f.default.createElement(y.Row,null,f.default.createElement(y.Col,{md:12},f.default.createElement(h.default,{id:this.state.id,refCode:this.props.refCode,onBpmFlowClick:this.props.onBpmFlowClick,processDefinitionId:this.state.processDefinitionId,processInstanceId:this.state.processInstanceId,appType:this.props.appType,properties:this.state.properties,onStart:this.props.onStart,onEnd:this.props.onEnd,onSuccess:this.props.onSuccess,onError:this.props.onError,onChangestate:this.onChangestate}))),this.state.properties.iscopytouser&&1==this.props.appType&&f.default.createElement(y.Row,null,f.default.createElement(y.Col,{md:12},f.default.createElement(I.default,{panelOpen:!1,title:"抄送(选填)",onCopyusersChange:function(t){e.setState({copyusers:t})},onintersectionChange:function(t){e.setState({intersection:t})}}))),f.default.createElement(y.Row,{style:{margin:"8px 0",padding:"0 10px"}},f.default.createElement(y.Col,{md:4,mdOffset:8,xs:4,xsOffset:8,sm:4,smOffset:8,style:{textAlign:"right",paddingRight:0}},f.default.createElement(y.Button,{onClick:this.handlerSubmitBtn,colors:"primary"},"提交")))),this.state.isShowFlowBtn&&f.default.createElement(y.Row,null,f.default.createElement(y.Col,{mdOffset:11,md:1,style:{textAlign:"right"}},f.default.createElement(y.Button,{onClick:this.props.onBpmFlowClick,style:{marginBottom:"4px",marginRight:"15px"},colors:"primary"},"流程图"))))}}]),t}();j.propTypes=T,j.defaultProps={id:"",appType:"1",refCode:"userUnderOrgRef"},t.default=j},934:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=k(n(37)),r=k(n(19)),s=k(n(24)),o=k(n(25)),i=k(n(55)),c=k(n(48)),l=k(n(90)),u=k(n(28)),d=i.default||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},p=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),(0,r.default)(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),f=k(n(97)),m=k(n(0)),y=n(1),h=k(y),g=n(34),v=k(n(114)),b=n(54),I=k(n(91)),w=k(n(176));function k(e){return e&&e.__esModule?e:{default:e}}function T(e){return function(){var t=e.apply(this,arguments);return new a.default(function(e,n){return function r(s,o){try{var i=t[s](o),c=i.value}catch(e){return void n(e)}if(!i.done)return a.default.resolve(c).then(function(e){r("next",e)},function(e){r("throw",e)});e(c)}("next")})}}var j={checkedArray:m.default.array,params:m.default.object,funccode:m.default.string,nodekey:m.default.string,url:m.default.string,urlAssignSubmit:m.default.string,className:m.default.string,filterRefUrl:m.default.string,refCode:m.default.string,size:m.default.string,scrollY:m.default.number,isOne:m.default.bool,onSuccess:m.default.func,onError:m.default.func,onStart:m.default.func,onEnd:m.default.func},E=function(e){function t(){var e=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||(0,u.default)(t)).call(this));return n.handlerBtn=T(c.default.mark(function t(){var a,r,s,o,i,u,d,p,f,m,y,h,g,v,I,w,k,T,j;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.props,r=a.params,s=a.checkedArray,o=a.isOne,i=a.onStart,u=a.onEnd,d=a.onSuccess,p=a.onError,!(o&&s.length>=2)){e.next=4;break}return p&&p({type:2,msg:"请选择单条数据提交"}),e.abrupt("return");case 4:if(!(s.length>0||r&&r.main)){e.next=32;break}if(!(s[0]&&s[0].bpmState>=1)){e.next=8;break}return p&&p({type:1,msg:"不能提交此单据，重复提交"}),e.abrupt("return");case 8:return i&&i(),e.next=11,(0,b.queryBpmTemplateAllocate)({funccode:n.props.funccode,nodekey:n.props.nodekey});case 11:if(f=e.sent,m=f.data,y=m.success,(h=m.detailMsg).data&&null!=h.data){e.next=18;break}return p&&p({type:1,msg:"当前单据没有绑定流程"}),e.abrupt("return");case 18:if("success"!=y){e.next=29;break}return g={url:n.props.url,processDefineCode:h.data.res_code,submitArray:s,params:r},n.setState({processDefineCode:h.data.res_code}),e.next=23,(0,b.onCommit)(g);case 23:v=e.sent,(I=v.data.flag)&&!v.data.data.assignAble?d&&d():I||p&&p({type:2,msg:(0,b.reconvert)(v.data.msg)||"流程启动失败"}),I&&v.data.data&&1==v.data.data.assignAble&&(w=v.data.data).assignedActivities&&w.assignedActivities.length>0&&(u&&u(),k=w.assignedActivities.filter(function(e){return!e.properties.startactivity}),n.setState({huanjieShow:!0,chaosongShow:w.assignedActivities[0].properties.iscopytouser,huanjieList:k,obj:s,assignInfo:{assignInfoItems:(0,l.default)(k,function(e){return{activityId:e.id,activityName:e.name,participants:[]}})}})),e.next=30;break;case 29:"fail_global"==y&&(T=result,j=T.data.message,p&&p({type:2,msg:(0,b.reconvert)(j)||"流程启动失败"}));case 30:e.next=33;break;case 32:p&&p({type:1,msg:"请选择提交的单据"});case 33:case"end":return e.stop()}},t,e)})),n.closeHuanjie=function(){n.setState({huanjieShow:!1,chaosongShow:!1,childRefKey:[],showVal:[]})},n.signAddOK=function(){var e=n.state.editRowIndex,t=n.state.assignInfo.assignInfoItems.slice();t[e].participants=(0,l.default)(n.state.userIds,function(e){return{id:e.id}}),n.setState({assignInfo:{assignInfoItems:t},userIds:[]})},n.huanjieHandlerOK=T(c.default.mark(function t(){var a,r,s,o,i,l,u,p,m,y,h,g,v,I,w,k;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.props,r=a.urlAssignSubmit,s=a.onSuccess,o=a.onError,i=a.onStart,a.onEnd,l=a.params,u=n.state,p=u.processDefineCode,m=u.assignInfo,y=u.obj,h=u.copyusers,g=u.intersection,v=u.submiting,y=y[0],I=[],w=n,h.map(function(e){I=I.concat(e)}),h=I,v){e.next=14;break}return i&&i(),n.setState({submiting:!0}),e.next=12,f.default.post(r,d({processDefineCode:p,assignInfo:m,obj:y,copyusers:h,intersection:g},l)).catch(function(e){o&&o({type:2,msg:"后台服务请求发生错误"}),w.setState({submiting:!1})});case 12:(k=e.sent).data.flag?(s&&s(),n.setState({huanjieShow:!1,chaosongShow:!1,childRefKey:[],showVal:[],submiting:!1})):k.data.flag||(o&&o({type:2,msg:(0,b.reconvert)(k.data.msg)||"流程启动失败"}),n.setState({huanjieShow:!1,chaosongShow:!1,childRefKey:[],showVal:[],submiting:!1}));case 14:case"end":return e.stop()}},t,e)})),n.changeCheck=function(){n.setState({intersection:!n.state.intersection})},n.state={childRefKey:[],userIds:[],processDefineCode:"",assignInfo:{assignInfoItems:[]},obj:[],huanjieShow:!1,huanjieList:[],chaosongShow:!1,editRowIndex:0,showVal:[],checkedArray:[],copyusers:[],intersection:!0,submiting:!1},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=(0,o.default)(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(s.default?(0,s.default)(e,t):e.__proto__=t)}(t,y.Component),p(t,[{key:"render",value:function(){var e=this,t=[{title:"名称",dataIndex:"name",key:"name"},{title:"指派",dataIndex:"1",key:"1",render:function(t,n,a){return h.default.createElement(v.default,{disabled:!1,option:(0,i.default)(JSON.parse(I.default),{title:"选择指派人员",refType:5,className:"",param:{refCode:"userUnderOrgRef",tenantId:"",sysId:"",transmitParam:"5"},emptyBtn:!0,textOption:{modalTitle:"选择指派人员",leftTitle:"组织结构",rightTitle:"人员列表",leftTransferText:"待选人员",rightTransferText:"已选人员"},checkedArray:e.state.checkedArray[a]||[],onCancel:function(e){console.log(e)},onSave:function(t,n){console.log(t);var r=t.map(function(e){return e.id}),s=e.state.showVal.slice();s[a]=n;var o=e.state.childRefKey.slice();o[a]=r;var i=e.state.assignInfo.assignInfoItems.slice();i[a].participants=(0,l.default)(o[a],function(e){return{id:e}});var c=e.state.checkedArray;c[a]=t,e.setState({checkedArray:c,childRefKey:o,showVal:s,assignInfo:{assignInfoItems:i}})},showVal:e.state.showVal[a],showKey:"refname",verification:!1})})}}];return h.default.createElement("span",null,h.default.createElement("span",{onClick:this.handlerBtn},this.props.children),h.default.createElement(g.Modal,{size:this.props.size,show:this.state.huanjieShow||this.state.chaosongShow,backdrop:!1,enforceFocus:!1,onHide:this.closeHuanjie},h.default.createElement(g.Modal.Header,{closeButton:!0},h.default.createElement(g.Modal.Title,null," ",this.state.huanjieShow?"环节指派":"抄送")),this.state.huanjieShow?h.default.createElement(g.Modal.Body,null,h.default.createElement(g.Table,{rowKey:function(e){return e.id},columns:t,data:this.state.huanjieList,scroll:{x:"100%",y:200}})):"",this.state.chaosongShow?h.default.createElement(g.Modal.Header,null,h.default.createElement(g.Modal.Title,null," 抄送 ")):"",this.state.chaosongShow?h.default.createElement(g.Modal.Body,null,h.default.createElement(w.default,d({onCopyusersChange:function(t){e.setState({copyusers:t})}},e.props,{onintersectionChange:function(t){e.setState({intersection:t})}}))):"",h.default.createElement(g.Modal.Footer,null,h.default.createElement(g.Button,{style:{marginRight:"10px"},onClick:this.closeHuanjie}," 关闭 "),h.default.createElement(g.Button,{colors:"primary",onClick:this.huanjieHandlerOK}," 确定 "))))}}]),t}();E.propTypes=j,E.defaultProps={checkedArray:[],nodekey:"003",funccode:"react",url:"/example/ygdemo_yw_info/submit",urlAssignSubmit:"/example/ygdemo_yw_info/assignSubmit",className:"",filterRefUrl:"/iuap_pap_quickstart/common/filterRef",refCode:"relatedUser",size:"",scrollY:270,isOne:!1,organrefCode:"newdept",positonrefCode:"newposition",roleRef:"newRoleRef",userRef:"relatedUser"},t.default=E},935:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=m(n(37)),r=m(n(19)),s=m(n(24)),o=m(n(25)),i=m(n(48)),c=m(n(28)),l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),(0,r.default)(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),u=m(n(0)),d=n(1),p=m(d),f=n(54);function m(e){return e&&e.__esModule?e:{default:e}}var y={checkedArray:u.default.array,url:u.default.string,data:u.default.array,className:u.default.string,onSuccess:u.default.func,onError:u.default.func,onStart:u.default.func,onEnd:u.default.func,params:u.default.object},h=function(e){function t(){var e=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||(0,c.default)(t)).call(this));return n.handlerBtn=function(e){return function(){var t=e.apply(this,arguments);return new a.default(function(e,n){return function r(s,o){try{var i=t[s](o),c=i.value}catch(e){return void n(e)}if(!i.done)return a.default.resolve(c).then(function(e){r("next",e)},function(e){r("throw",e)});e(c)}("next")})}}(i.default.mark(function t(){var a,r,s,o,c,l,u,d,p,m,y,h,g;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.props,r=a.checkedArray,s=a.onStart,a.onEnd,o=a.onSuccess,c=a.onError,l=a.params,u=[],!l||!l.pk_gd){e.next=13;break}return s&&s(),e.next=6,(0,f.onRecall)(n.props.url,l);case 6:d=e.sent,p=d.data,m=p.msg,p.flag?o&&o():c&&c({type:2,msg:m}),e.next=31;break;case 13:if(!(r.length>=2)){e.next=16;break}return c&&c({type:2,msg:"请选择单条数据收回"}),e.abrupt("return");case 16:if(!(r.length>0)){e.next=20;break}r[0]&&0!=r[0].bpmState&&null!=r[0].bpmState?u.push({id:r[0].id}):c&&c({type:1,msg:"流程没有启动无法撤回"}),e.next=22;break;case 20:return c&&c({type:1,msg:"请选择单据才能撤回"}),e.abrupt("return");case 22:if(!(u.length>0)){e.next=31;break}return s&&s(),e.next=26,(0,f.onRecall)(n.props.url,u);case 26:y=e.sent,h=y.data,h.success,(g=h.detailMsg).data.success&&"success"==g.data.success?o&&o():c&&c({type:2,msg:g.data.message});case 31:case"end":return e.stop()}},t,e)})),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=(0,o.default)(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(s.default?(0,s.default)(e,t):e.__proto__=t)}(t,d.Component),l(t,[{key:"render",value:function(){return p.default.createElement("span",{onClick:this.handlerBtn},this.props.children)}}]),t}();h.propTypes=y,h.defaultProps={checkedArray:[],url:"/example/ygdemo_yw_info/unsubmit",data:[],className:""},t.default=h},936:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=I(n(37)),r=I(n(19)),s=I(n(24)),o=I(n(25)),i=I(n(55)),c=I(n(48)),l=I(n(90)),u=I(n(28)),d=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),(0,r.default)(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),p=I(n(97)),f=I(n(0)),m=n(1),y=I(m),h=n(34),g=I(n(114)),v=n(54),b=I(n(91));function I(e){return e&&e.__esModule?e:{default:e}}function w(e){return function(){var t=e.apply(this,arguments);return new a.default(function(e,n){return function r(s,o){try{var i=t[s](o),c=i.value}catch(e){return void n(e)}if(!i.done)return a.default.resolve(c).then(function(e){r("next",e)},function(e){r("throw",e)});e(c)}("next")})}}var k={checkedArray:f.default.array,funccode:f.default.string,nodekey:f.default.string,url:f.default.string,urlAssignSubmit:f.default.string,className:f.default.string,filterRefUrl:f.default.string,refCode:f.default.string,scrollY:f.default.number,onSuccess:f.default.func,onError:f.default.func,onStart:f.default.func,onEnd:f.default.func},T=function(e){function t(){var e=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||(0,u.default)(t)).call(this));return n.handlerBtn=w(c.default.mark(function t(){var a,r,s,o,i,u,d,p,f,m,y,h,g,b,I;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.props,r=a.checkedArray,s=a.onStart,o=a.onEnd,i=a.onSuccess,u=a.onError,!(r.length>=2)){e.next=4;break}return u&&u({type:2,msg:"请选择单条数据提交"}),e.abrupt("return");case 4:if(!(r.length>0)){e.next=29;break}if(!(r[0].bpmState>=1)){e.next=8;break}return u&&u({type:1,msg:"不能提交此单据，重复提交"}),e.abrupt("return");case 8:return s&&s(),e.next=11,(0,v.queryBpmTemplateAllocate)({funccode:n.props.funccode,nodekey:n.props.nodekey});case 11:if(d=e.sent,p=d.data,f=p.success,m=p.detailMsg,"success"!=f){e.next=26;break}return y={url:n.props.url,processDefineCode:m.data.res_code,submitArray:r},n.setState({processDefineCode:m.data.res_code}),e.next=20,(0,v.onCommit)(y);case 20:h=e.sent,"success"==(g=h.data.success)&&void 0===h.data.detailMsg.data.assignAble?i&&i():"fail_global"==g&&u&&u({type:2,msg:(0,v.reconvert)(h.data.message)||"流程启动失败"}),1==h.data.detailMsg.data.assignAble&&h.data.detailMsg.data.assignedActivities&&h.data.detailMsg.data.assignedActivities.length>0&&(o&&o(),n.setState({huanjieShow:!0,huanjieList:h.data.detailMsg.data.assignedActivities,obj:r[0],assignInfo:{assignInfoItems:(0,l.default)(h.data.detailMsg.data.assignedActivities,function(e){return{activityId:e.id,activityName:e.name,participants:[]}})}})),e.next=27;break;case 26:"fail_global"==f&&(b=result,I=b.data.message,u&&u({type:2,msg:(0,v.reconvert)(I)||"流程启动失败"}));case 27:e.next=30;break;case 29:u&&u({type:1,msg:"请选择提交的单据"});case 30:case"end":return e.stop()}},t,e)})),n.closeHuanjie=function(){n.setState({huanjieShow:!1,childRefKey:[],showVal:[]})},n.signAddOK=function(){var e=n.state.editRowIndex,t=n.state.assignInfo.assignInfoItems.slice();t[e].participants=(0,l.default)(n.state.userIds,function(e){return{id:e.id}}),n.setState({assignInfo:{assignInfoItems:t},userIds:[]})},n.huanjieHandlerOK=w(c.default.mark(function t(){var a,r,s,o,i,l,u,d,f,m;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.props,r=a.urlAssignSubmit,s=a.onSuccess,o=a.onError,i=a.onStart,a.onEnd,l=n.state,u=l.processDefineCode,d=l.assignInfo,f=l.obj,i&&i(),e.next=5,p.default.post(r,{processDefineCode:u,assignInfo:d,obj:f}).catch(function(e){o&&o({type:2,msg:"后台服务请求发生错误"})});case 5:"success"==(m=e.sent).data.success?(s&&s(),n.setState({huanjieShow:!1,childRefKey:[],showVal:[]})):"fail_global"==m.data.success&&(o&&o({type:2,msg:(0,v.reconvert)(m.data.message)||"流程启动失败"}),n.setState({huanjieShow:!1,childRefKey:[],showVal:[]}));case 7:case"end":return e.stop()}},t,e)})),n.state={childRefKey:[],userIds:[],processDefineCode:"",assignInfo:{assignInfoItems:[]},obj:{},huanjieShow:!1,huanjieList:[{id:"approveUserTask3283",name:"1",type:"userTask"},{id:"approveUserTask3183",name:"1",type:"userTask"},{id:"approveUserTask3a83",name:"1",type:"userTask"},{id:"approveUserTask3s83",name:"1",type:"userTask"},{id:"approveUserTask32d3",name:"1",type:"userTask"},{id:"approveUserTask3zza83",name:"1",type:"userTask"},{id:"approveUserTasqzza83",name:"1",type:"userTask"},{id:"approveUserTask34za83",name:"1",type:"userTask"},{id:"approveUserTas43zza83",name:"1",type:"userTask"}],editRowIndex:0,showVal:[]},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=(0,o.default)(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(s.default?(0,s.default)(e,t):e.__proto__=t)}(t,m.Component),d(t,[{key:"render",value:function(){var e=this,t=[{title:"名称",dataIndex:"name",key:"name"},{title:"指派",dataIndex:"1",key:"1",render:function(t,n,a){return y.default.createElement(g.default,{disabled:!1,option:(0,i.default)(JSON.parse(b.default),{title:"人员选择",backdrop:!1,hasPage:!0,refType:2,isRadio:!1,filterRefUrl:e.props.filterRefUrl,className:"",param:{refCode:e.props.refCode,tenantId:"",sysId:"",transmitParam:"EXAMPLE_CONTACTS,EXAMPLE_ORGANIZATION"},keyList:e.state.childRefKey[a]||[],onSave:function(t,n){console.log(t);var r=t.map(function(e){return e.id}),s=e.state.showVal.slice();s[a]=n;var o=e.state.childRefKey.slice();o[a]=r;var i=e.state.assignInfo.assignInfoItems.slice();i[a].participants=(0,l.default)(o[a],function(e){return{id:e}}),e.setState({childRefKey:o,showVal:s,assignInfo:{assignInfoItems:i}})},showVal:e.state.showVal[a],showKey:"refname",verification:!1})})}}];return y.default.createElement(h.Table,{loading:!1,scroll:{y:this.props.scrollY},emptyText:function(){return y.default.createElement("span",null,"暂无环节")},rowKey:function(e){return e.id},columns:t,data:this.state.huanjieList})}}]),t}();T.propTypes=k,T.defaultProps={checkedArray:[],nodekey:"003",funccode:"react",url:"/example/ygdemo_yw_info/submit",urlAssignSubmit:"/example/ygdemo_yw_info/assignSubmit",className:"",filterRefUrl:"/iuap_pap_quickstart/common/filterRef",refCode:"relatedUser",scrollY:270},t.default=T}},[[407,1,2]]]);
//# sourceMappingURL=main.bfd0cfe1.bundle.js.map